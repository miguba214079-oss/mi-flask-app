<!DOCTYPE html>
<!-- Indica que este documento usa HTML5 -->

<html lang="en">
<!-- El idioma del documento est√° configurado como ingl√©s -->

<head>
    <meta charset="UTF-8">
    <!-- Permite usar caracteres especiales: tildes, √±, etc. -->

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Optimiza la visualizaci√≥n en dispositivos m√≥viles -->

    <title>Document</title>
    <!-- T√≠tulo por defecto (aunque ser√° reemplazado por el bloque title) -->
</head>

<body>
    {% extends 'base.html' %}
    <!-- Esta plantilla hereda de base.html para reutilizar su estructura -->

    {% block title %}Adivina el N√∫mero{% endblock %}
    <!-- Cambia el t√≠tulo de la pesta√±a del navegador -->

    {% block content %}
    <!-- Inicio del contenido que se incrustar√° dentro del layout base -->

<div class="d-flex flex-column align-items-center">
    <!-- Contenedor vertical y centrado -->

    <h2 class="mb-3 text-center">Adivina el N√∫mero</h2>
    <!-- T√≠tulo principal del juego -->

    <p class="text-center">
      Elige un n√∫mero entre 1 y 100. ¬°Tienes que adivinarlo!
    </p>
    <!-- Indicaciones al usuario -->

    <div class="mb-3 w-75 w-sm-50 w-md-25">
        <!-- Contenedor del input adaptativo seg√∫n tama√±o de pantalla -->

        <input type="number" id="guessInput" 
               class="form-control form-control-lg"
               placeholder="Tu n√∫mero" min="1" max="100" />
        <!-- Caja donde el usuario escribe su n√∫mero -->
    </div>

    <button id="guessBtn" 
            class="btn btn-success btn-lg mb-3 px-5 fw-semibold">
        Adivinar
    </button>
    <!-- Bot√≥n para enviar la respuesta -->

    <p id="resultMsg" class="fs-5 fw-semibold text-center"></p>
    <!-- Mensaje de resultado: acierto, m√°s bajo, m√°s alto -->

    <p id="attempts" class="fs-6 text-center">Intentos: 0</p>
    <!-- Contador de intentos -->
</div>

<script>
/* --------------------------- VARIABLES DEL JUEGO ---------------------------- */

const secretNumber = Math.floor(Math.random() * 100) + 1;
// Genera un n√∫mero aleatorio entre 1 y 100

let attempts = 0;
// Contador de intentos del jugador

/* -------------------------- EVENTO DEL BOT√ìN -------------------------------- */

document.getElementById('guessBtn').addEventListener('click', () => {

    const guessInput = document.getElementById('guessInput');
    // Obtiene el campo del n√∫mero ingresado

    const guess = Number(guessInput.value);
    // Convierte el valor ingresado a n√∫mero

    const resultMsg = document.getElementById('resultMsg');
    // Elemento donde se mostrar√° el mensaje de resultado

    const attemptsEl = document.getElementById('attempts');
    // Elemento donde se muestra el n√∫mero de intentos

    /* -------------------------- VALIDACI√ìN DEL INPUT --------------------------- */

    if (!guess || guess < 1 || guess > 100) {
        // Si no ingres√≥ un n√∫mero v√°lido...

        resultMsg.textContent = 'Por favor, ingresa un n√∫mero v√°lido entre 1 y 100.';
        resultMsg.style.color = 'red'; // Mensaje en rojo
        return;
    }

    attempts++; // Aumenta los intentos

    /* -------------------------- L√ìGICA DEL JUEGO ------------------------------ */

    if (guess === secretNumber) {
        // Si acert√≥ el n√∫mero

        resultMsg.textContent = 
          `¬°Correcto! El n√∫mero era ${secretNumber}. Lo lograste en ${attempts} intento(s). üéâ`;

        resultMsg.style.color = '#28a745'; // Verde √©xito
        attemptsEl.textContent = `Intentos: ${attempts}`;

        document.getElementById('guessBtn').disabled = true;
        // Deshabilita el bot√≥n despu√©s de ganar

    } else if (guess < secretNumber) {
        // Si es demasiado bajo

        resultMsg.textContent = 'Demasiado bajo. Intenta un n√∫mero m√°s alto.';
        resultMsg.style.color = '#fd7e14'; // Naranja
        attemptsEl.textContent = `Intentos: ${attempts}`;

    } else {
        // Si es demasiado alto

        resultMsg.textContent = 'Demasiado alto. Intenta un n√∫mero m√°s bajo.';
        resultMsg.style.color = '#fd7e14';
        attemptsEl.textContent = `Intentos: ${attempts}`;
    }
});
</script>

<!-- Bot√≥n para volver al men√∫ de juegos -->
<a href="{{ url_for('games') }}" class="btn btn-outline-warning mt-4">
  Volver a Juegos
</a>

{% endblock %}
<!-- Fin del contenido -->
</body>
</html>
