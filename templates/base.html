<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <title>Red Escolar - {% block title %}{% endblock %}</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Averia+Serif+Libre:wght@300;400;700&display=swap" rel="stylesheet">

    <style>
      /* ==========================================================
         BODY: Imagen de fondo + degradado pastel masculino
         ========================================================== */
      body {
        margin: 0;
        padding: 0;
        min-height: 100vh;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        color: #f0f0f0;
        transition: background 0.4s ease, color 0.4s ease;

        /* ⬇️ Fondo múltiple: degradado + imagen de fondo */
        background:
          linear-gradient(135deg, rgba(59, 113, 163, 0.707), rgba(76, 127, 172, 0.4), rgba(204,230,255,0.4)),
          url('https://th.bing.com/th/id/OIP.5dbykC2EjTz2kYWbiHp8PwHaC2?w=344&h=134&c=7&r=0&o=7&dpr=1.3&pid=1.7&rm=3') no-repeat center center;
        background-size: cover;
      }

      /* ==========================================================
         MODO OSCURO: mantiene la imagen visible con capa oscura
         ========================================================== */
      body.dark-mode {
        background:
          linear-gradient(135deg, rgb(0, 0, 0), rgb(0, 0, 0)),
          url('PEGA_AQUI_LA_URL_DE_TU_IMAGEN') no-repeat center center;
        background-size: cover;
        color: white;
      }

      /* ===========================
         BOTÓN MODO OSCURO/CLARO CENTRADO ARRIBA
         =========================== */
      #themeToggle {
        position: fixed;
        top: 10px;
        left: 50%;
        transform: translateX(-50%);
        padding: 10px 20px;
        background: #8ba9d5aa;
        border: none;
        border-radius: 20px;
        cursor: pointer;
        z-index: 9999;
        backdrop-filter: blur(5px);
        transition: 0.3s ease;
      }

      #themeToggle:hover {
        transform: translateX(-50%) scale(1.05);
      }

      /* ===========================
         Estilos originales
         =========================== */
      .navbar, .card { border-radius: 10px; }
      .card { background: rgba(46, 49, 51, 0.85); color: #f0f0f0; }
      a, a:hover { color: #ffcb05; text-decoration: none; }
      .btn-primary { background-color: #ff6f61; border: none; }
      .btn-primary:hover { background-color: #e85c4c; }
      .btn-outline-primary { color: #ff6f61; border-color: #ff6f61; }
      .btn-outline-primary:hover { background-color: #ff6f61; color: white; }
      .alert-primary { background-color: #ff9861; border-color: #e85c4c; color: white; }

    </style>
</head>

<body>

<!-- Botón modo oscuro/claro -->
<button id="themeToggle">Modo oscuro</button>

<!-- BARRA DE NAVEGACIÓN ORIGINAL -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark shadow-sm mb-4">
    <div class="container">
        <a class="navbar-brand fw-bold" style="text-align: center;" href="{{ url_for('index') }}">Red Social De CECyTEM</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navMenu">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navMenu">
            <ul class="navbar-nav ms-auto">
                {% if session.get('user_id') %}
                <li class="nav-item"><a class="nav-link" href="{{ url_for('index') }}">Inicio</a></li>
                <li class="nav-item"><a class="nav-link" href="{{ url_for('new_post') }}">Nueva publicación</a></li>
                <li class="nav-item"><a class="nav-link" href="{{ url_for('profile') }}">Perfil</a></li>
                <li class="nav-item"><a class="nav-link" href="{{ url_for('friends') }}">Amigos</a></li>
                <li class="nav-item"><a class="nav-link" href="{{ url_for('games') }}">Juegos</a></li>
                <li class="nav-item"><a class="nav-link" href="{{ url_for('logout') }}">Cerrar sesión</a></li>
                {% else %}
                <li class="nav-item"><a class="nav-link" href="{{ url_for('login') }}">Iniciar sesión</a></li>
                <li class="nav-item"><a class="nav-link" href="{{ url_for('register') }}">Registrarse</a></li>
                {% endif %}
            </ul>
        </div>
    </div>
</nav>

<div class="container mb-5">
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
        <div>
            {% for category, message in messages %}
            <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
                {{ message }}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>
            {% endfor %}
        </div>
        {% endif %}
    {% endwith %}

    {% block content %}{% endblock %}
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script>
    const toggle = document.getElementById("themeToggle");
    toggle.addEventListener("click", () => {
        document.body.classList.toggle("dark-mode");
        toggle.textContent = document.body.classList.contains("dark-mode") ? "Modo claro" : "Modo oscuro";
    });
</script>

</body>
</html>